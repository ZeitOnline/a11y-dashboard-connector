{
  "apiVersion": "batch/v1beta1",
  "kind": "CronJob",
  "metadata": {
    "name": "a11y-dashbord-connector"
  },
  "spec": {
    "concurrencyPolicy": "Forbid",
    "schedule": "*/15 * * * *",
    "jobTemplate": {
      "spec": {
        "template": {
          "spec": {
            "containers": [
              {
                "name": "pa11y",
                "image": "registry.zeit.de/a11y-dashbord-connector:v0.1",
                "command": ["npm", "run", "pa11y"]
              },
              {
                "name": "cssstats",
                "image": "registry.zeit.de/a11y-dashbord-connector:v0.1",
                "command": ["npm", "run", "cssstats"]
              },
              {
                "name": "htmlvalidator",
                "image": "registry.zeit.de/a11y-dashbord-connector:v0.1",
                "command": ["npm", "run", "htmlvalidator"]
              }
            ],
            "restartPolicy": "OnFailure"
          }
        }
      }
    }
  }
}
